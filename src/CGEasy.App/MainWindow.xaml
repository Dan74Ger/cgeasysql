<Window x:Class="CGEasy.App.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        xmlns:vm="clr-namespace:CGEasy.App.ViewModels"
        mc:Ignorable="d"
        Title="CG Easy - Management System" 
        Height="800" 
        Width="1400"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        ui:WindowHelper.UseModernWindowStyle="True">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- SIDEBAR -->
        <Border Grid.Column="0" 
                Background="{DynamicResource SystemControlBackgroundChromeMediumBrush}"
                BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
                BorderThickness="0,0,1,0">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Logo & Title -->
                <Border Grid.Row="0" 
                        Background="{DynamicResource SystemControlBackgroundAccentBrush}"
                        Padding="20,25">
                    <StackPanel>
                        <TextBlock Text="CG EASY" 
                                   FontSize="24" 
                                   FontWeight="Bold" 
                                   Foreground="White"/>
                        <TextBlock Text="Management System v2.0" 
                                   FontSize="11" 
                                   Foreground="White" 
                                   Opacity="0.9"
                                   Margin="0,5,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Navigation Menu -->
                <ScrollViewer Grid.Row="1" 
                              VerticalScrollBarVisibility="Auto"
                              Padding="10">
                    <StackPanel>
                        <!-- Dashboard -->
                        <Button Content="ðŸ  Dashboard" 
                                   Command="{Binding NavigateToDashboardCommand}"
                                   Style="{StaticResource AccentButtonStyle}"
                                   HorizontalAlignment="Stretch"
                                   Height="45"
                                   Margin="0,0,0,5"/>

                        <Separator Margin="0,10,0,10"/>

                        <!-- MODULI -->
                        <TextBlock Text="MODULI" 
                                   FontSize="11" 
                                   FontWeight="SemiBold" 
                                   Foreground="Gray"
                                   Margin="5,0,0,8"/>

                        <Button Content="ðŸ“‹ TODO Studio" 
                                   Command="{Binding NavigateToTodoCommand}"
                                   HorizontalAlignment="Stretch"
                                   HorizontalContentAlignment="Left"
                                   Height="40"
                                   Margin="0,0,0,5"/>

                        <Button Content="ðŸ’¼ Bilanci" 
                                   Command="{Binding NavigateToBilanciCommand}"
                                   HorizontalAlignment="Stretch"
                                   HorizontalContentAlignment="Left"
                                   Height="40"
                                   Margin="0,0,0,5"/>

                        <Button Content="ðŸ”— Associazioni Mastrini" 
                                   Command="{Binding NavigateToAssociazioniMastriniCommand}"
                                   HorizontalAlignment="Stretch"
                                   HorizontalContentAlignment="Left"
                                   Height="40"
                                   Margin="0,0,0,5"/>

                        <Button Content="ðŸ“„ Circolari" 
                                   Command="{Binding NavigateToCircolariCommand}"
                                   HorizontalAlignment="Stretch"
                                   HorizontalContentAlignment="Left"
                                   Height="40"
                                   Margin="0,0,0,5"/>

                        <Button Content="ðŸ“Š Controllo Gestione" 
                                   Command="{Binding NavigateToControlloCommand}"
                                   HorizontalAlignment="Stretch"
                                   HorizontalContentAlignment="Left"
                                   Height="40"
                                   Margin="0,0,0,5"/>

                        <Separator Margin="0,10,0,10"/>

                        <!-- ANAGRAFICHE -->
                        <TextBlock Text="ANAGRAFICHE" 
                                   FontSize="11" 
                                   FontWeight="SemiBold" 
                                   Foreground="Gray"
                                   Margin="5,0,0,8"/>

                        <Button Content="ðŸ‘¥ Clienti" 
                                   Command="{Binding NavigateToClientiCommand}"
                                   HorizontalAlignment="Stretch"
                                   HorizontalContentAlignment="Left"
                                   Height="40"
                                   Margin="0,0,0,5"/>

                        <Button Content="ðŸ‘” Professionisti" 
                                   Command="{Binding NavigateToProfessionistiCommand}"
                                   HorizontalAlignment="Stretch"
                                   HorizontalContentAlignment="Left"
                                   Height="40"
                                   Margin="0,0,0,5"/>

                        <Button Content="ðŸ“‹ Tipo Pratiche" 
                                   Command="{Binding NavigateToTipoPraticheCommand}"
                                   HorizontalAlignment="Stretch"
                                   HorizontalContentAlignment="Left"
                                   Height="40"
                                   Margin="0,0,0,5"/>

                        <Separator Margin="0,10,0,10"/>

                        <!-- AMMINISTRAZIONE -->
                        <TextBlock Text="AMMINISTRAZIONE" 
                                   FontSize="11" 
                                   FontWeight="SemiBold" 
                                   Foreground="Gray"
                                   Margin="5,0,0,8"/>

                        <Button Content="âš™ï¸ Gestione Utenti" 
                                   Command="{Binding NavigateToUtentiCommand}"
                                   HorizontalAlignment="Stretch"
                                   HorizontalContentAlignment="Left"
                                   Height="40"
                                   Margin="0,0,0,5"/>

                        <Button Content="ðŸ”§ Sistema" 
                                   Command="{Binding NavigateToSistemaCommand}"
                                   HorizontalAlignment="Stretch"
                                   HorizontalContentAlignment="Left"
                                   Height="40"
                                   Margin="0,0,0,5"/>
                    </StackPanel>
                </ScrollViewer>

                <!-- User Info & Logout -->
                <Border Grid.Row="2" 
                        BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
                        BorderThickness="0,1,0,0"
                        Padding="15">
                    <StackPanel>
                        <TextBlock Text="{Binding CurrentUserName}" 
                                   FontWeight="SemiBold" 
                                   FontSize="13"
                                   TextTrimming="CharacterEllipsis"/>
                        <TextBlock Text="{Binding CurrentUserRole}" 
                                   FontSize="11" 
                                   Foreground="Gray"
                                   Margin="0,2,0,0"/>
                        
                        <Button Content="Esci" 
                                   Command="{Binding LogoutCommand}"
                                   HorizontalAlignment="Stretch"
                                   Height="35"
                                   Margin="0,10,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Border>

        <!-- MAIN CONTENT AREA -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Top Bar -->
            <Border Grid.Row="0" 
                    Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}"
                    BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
                    BorderThickness="0,0,0,1"
                    Padding="25,20">
                <TextBlock Text="{Binding PageTitle}" 
                           FontSize="24" 
                           FontWeight="SemiBold"/>
            </Border>

            <!-- Content -->
            <ContentControl Grid.Row="1" 
                            Content="{Binding CurrentView}"
                            Margin="0"/>
        </Grid>
    </Grid>
</Window>
