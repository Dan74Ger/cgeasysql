<Window x:Class="CGEasy.App.Views.LicenseKeyEditDialogView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        ui:WindowHelper.UseModernWindowStyle="True"
        Title="âœï¸ Modifica Durata Licenza"
        Height="420"
        Width="550"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="#F5F5F5">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,20">
            <TextBlock Text="Modifica Durata Licenza" 
                       FontSize="22" 
                       FontWeight="Bold" 
                       Foreground="#1976D2"/>
            <TextBlock Text="Imposta la durata della licenza o rendila perpetua" 
                       FontSize="13" 
                       Foreground="#666" 
                       Margin="0,5,0,0"/>
        </StackPanel>

        <!-- Form Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Info Chiave -->
                <Border Background="White" 
                        CornerRadius="6" 
                        Padding="15" 
                        Margin="0,0,0,15"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="ðŸ“‹ Informazioni Licenza" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,10"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Modulo:" FontWeight="SemiBold" Margin="0,0,0,8"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" x:Name="ModuloTextBlock" Margin="0,0,0,8"/>

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Cliente:" FontWeight="SemiBold" Margin="0,0,0,8"/>
                            <TextBlock Grid.Row="1" Grid.Column="1" x:Name="ClienteTextBlock" Margin="0,0,0,8"/>

                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Data Generazione:" FontWeight="SemiBold"/>
                            <TextBlock Grid.Row="2" Grid.Column="1" x:Name="DataGenerazioneTextBlock"/>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Tipo Durata -->
                <Border Background="White" 
                        CornerRadius="6" 
                        Padding="15" 
                        Margin="0,0,0,15"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="â±ï¸ Tipo Durata" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,10"/>
                        
                        <RadioButton x:Name="RadioDurataLimitata" 
                                     Content="Durata Limitata (anni)"
                                     IsChecked="True"
                                     Margin="0,0,0,10"
                                     Checked="RadioDurataLimitata_Checked"/>
                        
                        <RadioButton x:Name="RadioPerpetua" 
                                     Content="â™¾ï¸ Licenza Perpetua (senza scadenza)"
                                     Checked="RadioPerpetua_Checked"/>
                    </StackPanel>
                </Border>

                <!-- Durata in Anni (visibile solo se Durata Limitata) -->
                <Border x:Name="DurataPanel"
                        Background="White" 
                        CornerRadius="6" 
                        Padding="15"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="ðŸ“… Data Scadenza" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,10"/>
                        
                        <DatePicker x:Name="ScadenzaDatePicker"
                                    Height="36"
                                    FontSize="14"
                                    Margin="0,0,0,5"
                                    SelectedDateChanged="ScadenzaDatePicker_SelectedDateChanged"/>
                        
                        <TextBlock Text="ðŸ’¡ Suggerimento: Puoi anche inserire il numero di anni desiderati qui sotto, e la data verrÃ  calcolata automaticamente."
                                   FontSize="11"
                                   Foreground="#666"
                                   TextWrapping="Wrap"
                                   Margin="0,0,0,15"/>
                        
                        <TextBlock Text="âš¡ Calcolo Rapido (in anni)" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,8"/>
                        
                        <TextBox x:Name="AnniTextBox"
                                 ui:ControlHelper.PlaceholderText="Inserisci numero di anni (es: 1, 5, 10) oppure 0 per test immediato"
                                 Height="36"
                                 FontSize="14"
                                 Margin="0,0,0,10"/>
                        
                        <TextBlock x:Name="ScadenzaCalcolataTextBlock"
                                   FontSize="12"
                                   Foreground="#2196F3"
                                   FontWeight="SemiBold"
                                   TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- Buttons -->
        <StackPanel Grid.Row="2" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Margin="0,20,0,0">
            <Button Content="ðŸ’¾ Salva" 
                    x:Name="SaveButton"
                    Width="100" 
                    Height="36"
                    Margin="0,0,10,0"
                    Background="#4CAF50"
                    Foreground="White"
                    FontWeight="SemiBold"
                    Click="SaveButton_Click"/>
            <Button Content="âŒ Annulla" 
                    Width="100" 
                    Height="36"
                    Click="CancelButton_Click"/>
        </StackPanel>
    </Grid>
</Window>

