<Window x:Class="CGEasy.App.Views.BilancioDialogView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        Title="{Binding Title}"
        Height="550"
        Width="600"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="{DynamicResource SystemControlPageBackgroundChromeLowBrush}">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="{DynamicResource SystemControlBackgroundAccentBrush}"
                CornerRadius="8" Padding="20" Margin="0,0,0,20">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="ðŸ“" FontSize="28" VerticalAlignment="Center" Margin="0,0,15,0"/>
                <TextBlock Text="{Binding Title}" FontSize="20" FontWeight="SemiBold" 
                           Foreground="White" VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Form -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Cliente -->
                <TextBlock Text="ðŸ¢ Cliente *" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <ComboBox ItemsSource="{Binding Clienti}"
                          SelectedItem="{Binding SelectedCliente}"
                          DisplayMemberPath="NomeCliente"
                          ui:ControlHelper.PlaceholderText="Seleziona cliente..."
                          Margin="0,0,0,15"/>

                <!-- Periodo -->
                <TextBlock Text="ðŸ“… Periodo *" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="10"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock Text="Mese (1-12)" FontSize="11" Foreground="Gray" Margin="0,0,0,3"/>
                        <TextBox Text="{Binding Mese, UpdateSourceTrigger=PropertyChanged}"
                                 ui:ControlHelper.PlaceholderText="1-12"/>
                    </StackPanel>

                    <StackPanel Grid.Column="2">
                        <TextBlock Text="Anno" FontSize="11" Foreground="Gray" Margin="0,0,0,3"/>
                        <TextBox Text="{Binding Anno, UpdateSourceTrigger=PropertyChanged}"
                                 ui:ControlHelper.PlaceholderText="2025"/>
                    </StackPanel>
                </Grid>

                <!-- Codice Mastrino -->
                <TextBlock Text="ðŸ”¢ Codice Mastrino *" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <TextBox Text="{Binding CodiceMastrino, UpdateSourceTrigger=PropertyChanged}"
                         ui:ControlHelper.PlaceholderText="es: 01.001"
                         Margin="0,0,0,15"/>

                <!-- Descrizione -->
                <TextBlock Text="ðŸ“ Descrizione *" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <TextBox Text="{Binding DescrizioneMastrino, UpdateSourceTrigger=PropertyChanged}"
                         ui:ControlHelper.PlaceholderText="es: Cassa"
                         Margin="0,0,0,15"/>

                <!-- Importo -->
                <TextBlock Text="ðŸ’° Importo (â‚¬) *" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <TextBox Text="{Binding Importo, UpdateSourceTrigger=PropertyChanged, StringFormat=N2}"
                         ui:ControlHelper.PlaceholderText="Positivo o negativo"
                         Margin="0,0,0,5"/>
                <TextBlock Text="ðŸ’¡ Importo puÃ² essere positivo o negativo" 
                           FontSize="11" Foreground="Gray" FontStyle="Italic" Margin="0,0,0,15"/>

                <!-- Note -->
                <TextBlock Text="ðŸ“„ Note (opzionale)" FontWeight="SemiBold" Margin="0,0,0,5"/>
                <TextBox Text="{Binding Note, UpdateSourceTrigger=PropertyChanged}"
                         ui:ControlHelper.PlaceholderText="Note aggiuntive..."
                         AcceptsReturn="True"
                         TextWrapping="Wrap"
                         Height="80"
                         VerticalScrollBarVisibility="Auto"/>
            </StackPanel>
        </ScrollViewer>

        <!-- Buttons -->
        <Border Grid.Row="2" BorderThickness="0,1,0,0" BorderBrush="#E0E0E0" Padding="0,20,0,0" Margin="0,20,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="âŒ Annulla" 
                        Command="{Binding CancelCommand}"
                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"
                        Padding="20,10" 
                        Margin="0,0,10,0"
                        MinWidth="120"/>
                <Button Content="ðŸ’¾ Salva" 
                        Command="{Binding SaveCommand}"
                        CommandParameter="{Binding RelativeSource={RelativeSource AncestorType=Window}}"
                        Style="{StaticResource AccentButtonStyle}"
                        Padding="20,10"
                        MinWidth="120"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>

