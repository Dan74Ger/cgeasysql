â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          GUIDA POST-INSTALLAZIONE CGEASY v2.0                          â•‘
â•‘       Procedura per Database con Dati e Criptazione Manuale            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ STRATEGIA IMPLEMENTATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

L'applicazione Ã¨ ora configurata per:
âœ… Creare SEMPRE database NON criptato al primo avvio
âœ… Ignorare completamente file db.key
âœ… Permettere copia manuale database con dati
âœ… Permettere criptazione manuale dalle impostazioni

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ PROCEDURA COMPLETA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

STEP 1: INSTALLAZIONE PULITA
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Esegui CGEasy_Setup_v2.0.exe
2. Completa installazione
3. NON avviare ancora l'applicazione

STEP 2: PREPARA DATABASE CON DATI
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Hai il database di sviluppo in: C:\devcg-group\dbtest_prova\cgeasy.db

Se vuoi usare quello, fai backup:
```powershell
# Crea backup di sicurezza
Copy-Item "C:\devcg-group\dbtest_prova\cgeasy.db" "C:\backup_db_sviluppo\cgeasy.db"
```

STEP 3: PRIMO AVVIO (Crea DB Vuoto)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Avvia CGEasy (prima volta)
2. L'app crea: C:\db_CGEASY\cgeasy.db (VUOTO, NON criptato)
3. Vedi messaggio: "Database inizializzato! Username: admin1, Password: 123123"
4. Clicca OK
5. CHIUDI immediatamente l'applicazione (non fare login)

STEP 4: SOSTITUISCI CON DATABASE DATI
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```powershell
# Elimina database vuoto
Remove-Item "C:\db_CGEASY\cgeasy.db" -Force

# Copia database con dati
Copy-Item "C:\devcg-group\dbtest_prova\cgeasy.db" "C:\db_CGEASY\cgeasy.db" -Force

# Verifica
Get-Item "C:\db_CGEASY\cgeasy.db" | Select Length
```

STEP 5: AVVIA E ACCEDI
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Avvia CGEasy
2. Login con: admin1 / 123123
3. âœ… Nessun errore "file not encrypted"!
4. Vedi tutti i tuoi dati (clienti, bilanci, indici)

STEP 6: CRIPTA DATABASE (Opzionale)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Se vuoi criptare:

1. Vai in: Sistema â†’ Criptazione Database
2. Clicca: "Cripta Database"
3. Inserisci password: [la tua password]
4. Conferma
5. L'app crea backup automatico
6. L'app si riavvia
7. Database ora criptato con la tua password

IMPORTANTE: Dopo criptazione, per accedere serve la password!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”§ MODIFICHE TECNICHE IMPLEMENTATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE: src/CGEasy.Core/Data/LiteDbContext.cs
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Funzione GetPasswordForDatabase() modificata:
- PRIMA: Controllava db.key e decideva se usare password
- ORA: Ritorna sempre NULL (nessuna password)

```csharp
private static string? GetPasswordForDatabase()
{
    // SEMPRE senza password per evitare problemi
    System.Diagnostics.Debug.WriteLine("Database aperto SENZA password");
    return null;
}
```

FILE: src/CGEasy.App/App.xaml.cs
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Metodo InitializeDatabase() semplificato:
- PRIMA: Gestiva db.key e criptazione automatica
- ORA: Crea solo database vuoto non criptato

```csharp
if (totalUtenti == 0)
{
    dbContext.SeedDefaultAdmin();
    MessageBox.Show("Database NON criptato");
}
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸ RISOLUZIONE PROBLEMI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROBLEMA: "Database file is not encrypted"
SOLUZIONE: âœ… RISOLTO! Ora non puÃ² piÃ¹ accadere
           L'app ignora completamente db.key

PROBLEMA: Database vuoto dopo installazione
SOLUZIONE: Normale! Copia manualmente come STEP 4

PROBLEMA: Password dimenticata dopo criptazione
SOLUZIONE: Usa Password Master: Woodstockac@74
           Sempre disponibile per recupero

PROBLEMA: Voglio ricominciare da zero
SOLUZIONE: 
```powershell
Remove-Item "C:\db_CGEASY\*" -Force -Recurse
# Poi riavvia app per ricreare DB vuoto
```

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… VANTAGGI NUOVA STRATEGIA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Nessun errore "file not encrypted" mai piÃ¹
âœ“ Installazione sempre pulita e funzionante
âœ“ Controllo totale sui dati (copi quando vuoi)
âœ“ Criptazione opzionale (decidi tu quando)
âœ“ Backup automatici durante criptazione
âœ“ Password master sempre disponibile per recupero
âœ“ Database condivisibile tra PC (prima di criptare)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‚ PERCORSI IMPORTANTI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Database produzione:
  C:\db_CGEASY\cgeasy.db

Database sviluppo:
  C:\devcg-group\dbtest_prova\cgeasy.db

Backup automatici:
  C:\db_CGEASY\Backups\

Installer:
  C:\devcg-group\appcg_easy_project\installer_output\CGEasy_Setup_v2.0.exe

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ COMANDI RAPIDI POWERSHELL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Backup database corrente
Copy-Item "C:\db_CGEASY\cgeasy.db" "C:\backup_$(Get-Date -F yyyyMMdd_HHmmss).db"

# Sostituisci con database sviluppo
Copy-Item "C:\devcg-group\dbtest_prova\cgeasy.db" "C:\db_CGEASY\cgeasy.db" -Force

# Verifica dimensioni
Get-Item "C:\db_CGEASY\cgeasy.db" | Select Length,LastWriteTime

# Reset completo (ricomincia da zero)
Remove-Item "C:\db_CGEASY\cgeasy.db" -Force
# Poi riavvia app

# Apri cartella database
explorer "C:\db_CGEASY"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ CREDENZIALI DEFAULT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Username: admin1
Password: 123123

Oppure:

Username: admin
Password: 123456

Password Master (recupero): Woodstockac@74

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Versione Guida: 1.0
Data: 17/11/2025
Installer: CGEasy_Setup_v2.0.exe
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

